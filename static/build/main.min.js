"use strict";var CommitForm=React.createClass({displayName:"CommitForm",getInitialState:function(){return{old_commits:this.props.commits,commits:this.props.commits,path:this.props.path,command:""}},componentWillReceiveProps:function(e){this.setState({commits:e.commits,command:""})},inputChange:function(e){var t=this.state.commits,a=/.*\$(\d+)\.\d+.(\d)\.0/,c=/^(\d|[0-1]\d|2[0-3]):(\d|[0-5]\d):(\d|[0-5]\d)$/,i=a.exec(e.dispatchMarker),l=parseInt(i[1]),n=parseInt(i[2]);2==n?t[l].author=e.target.value:3==n?t[l].email=e.target.value:4==n?t[l].date=e.target.value:5==n&&(t[l].time=e.target.value,c.test(e.target.value)?$(e.target).parent().removeClass("error"):$(e.target).parent().addClass("error")),this.setState({commits:t})},doneClick:function(e){if("edit"==e.target.id||"regen"==e.target.id){var t=this;$.post("/generate",{path:JSON.stringify(this.state.address),commits:JSON.stringify(this.state.commits),old_commits:JSON.stringify(this.state.old_commits)},function(e,a){t.setState({command:e.command})})}else if("run"==e.target.id){var a=e.target;$(a).removeClass("green"),$(a).addClass("loading"),$.post("/run",{},function(){$(a).removeClass("loading"),$(a).addClass("green"),$(a).text("Success!"),setTimeout(function(){$("#modify").click(),$(a).text("Run")},1e3)})}},render:function(){var e=null,t=null;return this.state.command&&(e=React.createElement("div",{className:"ten wide column"},React.createElement("div",{className:"ui form commands"},React.createElement("div",{className:"field"},React.createElement("label",null,"Command"),React.createElement("textarea",{value:this.state.command,readOnly:!0})))),t=React.createElement("div",{className:"row"},React.createElement("button",{className:"ui huge blue button",onClick:this.doneClick,id:"regen"},"Re-generate command"))),React.createElement("div",{className:"ui container"},React.createElement("div",{className:"ui center aligned grid"},React.createElement("div",{className:"ui row"},React.createElement("div",{className:"sixteen wide column"},React.createElement("div",{className:"ui form"},React.createElement("div",{className:"field"},React.createElement("div",{className:"three fields"},React.createElement("div",{className:"two wide disabled field"},React.createElement("label",null,"SHA")),React.createElement("div",{className:"four wide disabled field"},React.createElement("label",null,"Message")),React.createElement("div",{className:"two wide field"},React.createElement("label",null,"Author")),React.createElement("div",{className:"three wide field"},React.createElement("label",null,"Email")),React.createElement("div",{className:"three wide field"},React.createElement("label",null,"Date")),React.createElement("div",{className:"two wide field"},React.createElement("label",null,"Time")))),this.state.commits.map(function(e,t){return React.createElement("div",{className:"field",key:t},React.createElement("div",{className:"three fields"},React.createElement("div",{className:"two wide disabled field"},React.createElement("input",{type:"text",placeholder:"SHA",value:e.sha.slice(0,6),onChange:this.inputChange})),React.createElement("div",{className:"four wide disabled field"},React.createElement("input",{type:"text",placeholder:"Message",value:e.message,onChange:this.inputChange})),React.createElement("div",{className:"two wide field"},React.createElement("input",{type:"text",placeholder:"Author",value:e.author,onChange:this.inputChange})),React.createElement("div",{className:"three wide field"},React.createElement("input",{type:"email",placeholder:"Email",value:e.email,onChange:this.inputChange})),React.createElement("div",{className:"three wide field"},React.createElement("input",{type:"date",placeholder:"Date",value:e.date,onChange:this.inputChange})),React.createElement("div",{className:"two wide field"},React.createElement("input",{type:"text",placeholder:"Time",value:e.time,onChange:this.inputChange}))))},this))))),React.createElement("div",{className:"sixteen wide row"},React.createElement("div",{className:"ui center aligned stackable grid"},e,React.createElement("div",{className:"three wide center aligned column"},t,React.createElement("div",{className:"row"},React.createElement("button",{className:"ui huge green button",onClick:this.doneClick,id:""==this.state.command?"edit":"run"},""==this.state.command?"Done":"Run"))))))}});$("#modify").on("click",function(){var e=$("#addr").val();$.get("/commits?path="+e,function(e,t){e.success?ReactDOM.render(React.createElement(CommitForm,{commits:e.commits,path:e.path}),document.getElementById("commits")):(ReactDOM.render(React.createElement("div",{className:"ui twelve wide column"},React.createElement("div",{className:"ui red message"},e.error)),document.getElementById("commits")),$(".message .close").on("click",function(){$(this).closest(".message").transition("fade")}))})});